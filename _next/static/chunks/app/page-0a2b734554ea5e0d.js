(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{909:(e,t,a)=>{Promise.resolve().then(a.bind(a,5584))},5584:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var s=a(5155),n=a(2115),r=a(2317),o=a(1027),l=a(3463),i=a(9795);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,l.$)(t))}let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=n.forwardRef((e,t)=>{let{className:a,variant:n,size:o,asChild:l=!1,...i}=e,m=l?r.DX:"button";return(0,s.jsx)(m,{className:d(c({variant:n,size:o,className:a})),ref:t,...i})});m.displayName="Button";var u=a(5714).Buffer;let f="markdown-notes",p="markdown-folders",x=n.forwardRef((e,t)=>{let{className:a,type:n,...r}=e;return(0,s.jsx)("input",{type:n,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});x.displayName="Input";let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("textarea",{className:d("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});h.displayName="Textarea";var g=a(4206);function b(e){let{note:t,isPreview:a,onChange:r}=e,[o,l]=(0,n.useState)(t);(0,n.useEffect)(()=>{l(t)},[t]);let i=(e,t)=>{let a={...o,[e]:t,updatedAt:new Date().toISOString()};l(a),r(a)};return a?(0,s.jsxs)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[(0,s.jsx)("h1",{children:t.title||"Untitled Note"}),(0,s.jsx)(g.o,{children:t.content})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(x,{value:o.title,onChange:e=>i("title",e.target.value),placeholder:"Note title"}),(0,s.jsx)(h,{value:o.content,onChange:e=>i("content",e.target.value),placeholder:"Write your note in markdown...",className:"min-h-[400px] font-mono"})]})}var N=a(1719),j=a(6967),y=a(7257),v=a(6659),w=a(5686),S=a(3473),k=a(7294),C=a(8867),A=a(3565);let z=k.bL,F=k.l9;k.YJ,k.ZL,k.Pb,k.z6,n.forwardRef((e,t)=>{let{className:a,inset:n,children:r,...o}=e;return(0,s.jsxs)(k.ZP,{ref:t,className:d("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",n&&"pl-8",a),...o,children:[r,(0,s.jsx)(j.A,{className:"ml-auto h-4 w-4"})]})}).displayName=k.ZP.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(k.G5,{ref:t,className:d("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=k.G5.displayName;let I=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(k.ZL,{children:(0,s.jsx)(k.UC,{ref:t,className:d("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});I.displayName=k.UC.displayName;let R=n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(k.q7,{ref:t,className:d("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",a),...r})});function D(e){let{folders:t,notes:a,selectedNoteId:r,onNoteSelect:o,onFolderCreate:l,onFolderDelete:i,onNoteCreate:d,onNoteDelete:c}=e,[u,f]=(0,n.useState)(new Set),[p,h]=(0,n.useState)(""),[g,b]=(0,n.useState)(null),k=e=>{let t=new Set(u);t.has(e)?t.delete(e):t.add(e),f(t)},C=e=>{p&&(l(p,e),h(""),b(null))},A=e=>{let n=t.filter(t=>t.parentId===e.id),l=a.filter(t=>t.folderId===e.id),f=u.has(e.id);return(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)(z,{children:[(0,s.jsx)(F,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded hover:bg-accent cursor-pointer",onClick:()=>k(e.id),children:[f?(0,s.jsx)(N.A,{className:"h-4 w-4"}):(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)(y.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]})}),(0,s.jsxs)(I,{children:[(0,s.jsx)(R,{onClick:()=>b(e.id),children:"New Folder"}),(0,s.jsx)(R,{onClick:()=>d(e.id),children:"New Note"}),(0,s.jsx)(R,{onClick:()=>i(e.id),children:"Delete Folder"})]})]}),f&&(0,s.jsxs)("div",{className:"ml-4",children:[g===e.id&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-1",children:[(0,s.jsx)(x,{value:p,onChange:e=>h(e.target.value),onKeyDown:t=>{"Enter"===t.key&&C(e.id)},placeholder:"Folder name...",className:"h-8"}),(0,s.jsx)(m,{size:"sm",onClick:()=>C(e.id),children:"Create"})]}),n.map(A),l.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-1 ml-4 rounded cursor-pointer ".concat(r===e.id?"bg-accent":"hover:bg-accent"),onClick:()=>o(e.id),children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.title||"Untitled Note"}),(0,s.jsx)(m,{variant:"ghost",size:"icon",className:"ml-auto h-6 w-6",onClick:t=>{t.stopPropagation(),c(e.id)},children:(0,s.jsx)(w.A,{className:"h-4 w-4"})})]},e.id))]})]},e.id)};return(0,s.jsxs)("div",{className:"min-h-[500px] p-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Files"}),(0,s.jsxs)(m,{size:"sm",variant:"outline",onClick:()=>b("root"),children:[(0,s.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"New Folder"]})]}),"root"===g&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(x,{value:p,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C(null)},placeholder:"Folder name...",className:"h-8"}),(0,s.jsx)(m,{size:"sm",onClick:()=>C(null),children:"Create"})]}),t.filter(e=>!e.parentId).map(A)]})}R.displayName=k.q7.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:r,...o}=e;return(0,s.jsxs)(k.H_,{ref:t,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(k.VF,{children:(0,s.jsx)(C.A,{className:"h-4 w-4"})})}),n]})}).displayName=k.H_.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(k.hN,{ref:t,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(k.VF,{children:(0,s.jsx)(A.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=k.hN.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(k.JU,{ref:t,className:d("px-2 py-1.5 text-sm font-semibold text-foreground",n&&"pl-8",a),...r})}).displayName=k.JU.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(k.wv,{ref:t,className:d("-mx-1 my-1 h-px bg-border",a),...n})}).displayName=k.wv.displayName;var O=a(1626),U=a(7780),_=a(6217),E=a(767);let J=_.bL,P=_.l9,H=_.ZL;_.bm;let G=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(_.hJ,{ref:t,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});G.displayName=_.hJ.displayName;let T=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(H,{children:[(0,s.jsx)(G,{}),(0,s.jsxs)(_.UC,{ref:t,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[n,(0,s.jsxs)(_.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(E.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});T.displayName=_.UC.displayName;let L=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};L.displayName="DialogHeader";let V=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(_.hE,{ref:t,className:d("text-lg font-semibold leading-none tracking-tight",a),...n})});V.displayName=_.hE.displayName;let Z=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(_.VY,{ref:t,className:d("text-sm text-muted-foreground",a),...n})});Z.displayName=_.VY.displayName;var Y=a(6195);let q=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(Y.b,{ref:t,className:d(q(),a),...n})});function K(e){let{onSync:t}=e,[a,r]=(0,n.useState)(!1),[o,l]=(0,n.useState)(""),[i,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),f=async()=>{try{u(!0),await t(o,i),r(!1)}catch(e){console.error("Sync failed:",e)}finally{u(!1)}};return(0,s.jsxs)(J,{open:a,onOpenChange:r,children:[(0,s.jsx)(P,{asChild:!0,children:(0,s.jsxs)(m,{variant:"outline",children:[(0,s.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Sync with GitHub"]})}),(0,s.jsxs)(T,{children:[(0,s.jsxs)(L,{children:[(0,s.jsx)(V,{children:"Sync with GitHub"}),(0,s.jsx)(Z,{children:"Enter your GitHub personal access token and repository details to sync your notes."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(B,{htmlFor:"token",children:"GitHub Token"}),(0,s.jsx)(x,{id:"token",value:o,onChange:e=>l(e.target.value),placeholder:"ghp_xxxxxxxxxxxx",type:"password"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(B,{htmlFor:"repo",children:"Repository (username/repo)"}),(0,s.jsx)(x,{id:"repo",value:i,onChange:e=>d(e.target.value),placeholder:"username/repo"})]})]}),(0,s.jsxs)(m,{onClick:f,disabled:!o||!i||c,className:"w-full",children:[(0,s.jsx)(U.A,{className:"h-4 w-4 mr-2"}),c?"Syncing...":"Save to GitHub"]})]})]})}function M(){let[e,t]=(0,n.useState)(null),{notes:a,folders:r,addFolder:o,deleteFolder:l,addNote:i,updateNote:d,deleteNote:c,syncWithGitHub:x}=function(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=localStorage.getItem(f),a=localStorage.getItem(p);e&&t(JSON.parse(e)),a&&s(JSON.parse(a))},[]);let r=e=>{localStorage.setItem(f,JSON.stringify(e)),t(e)},o=e=>{localStorage.setItem(p,JSON.stringify(e)),s(e)},l=async(t,s)=>{try{let n=async e=>{let a=r(e);await fetch("https://api.github.com/repos/".concat(s,"/contents/").concat(a,"/.gitkeep"),{method:"PUT",headers:{Authorization:"token ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:"Create folder ".concat(e.name),content:u.from("").toString("base64")})})},r=e=>{let t=["content"],s=e;for(;s;)t.unshift(s.name),s=a.find(e=>e.id===s.parentId);return t.join("/")};for(let e of a)await n(e);for(let n of e){let e=a.find(e=>e.id===n.folderId),o="".concat(r(e),"/").concat(n.title,".md"),l="---\ntitle: ".concat(n.title,"\ncreatedAt: ").concat(n.createdAt,"\nupdatedAt: ").concat(n.updatedAt,"\n---\n\n").concat(n.content),i=await fetch("https://api.github.com/repos/".concat(s,"/contents/").concat(o),{headers:{Authorization:"token ".concat(t),"Content-Type":"application/json"}}),d=i.ok?await i.json():null,c=null==d?void 0:d.sha;await fetch("https://api.github.com/repos/".concat(s,"/contents/").concat(o),{method:"PUT",headers:{Authorization:"token ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:"Update ".concat(o),content:u.from(l).toString("base64"),...c?{sha:c}:{}})})}}catch(e){throw console.error("Failed to sync with GitHub:",e),e}};return{notes:e,folders:a,addFolder:(e,t)=>{o([...a,{id:Date.now().toString(),name:e,parentId:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}])},deleteFolder:t=>{let s=e=>{let t=a.filter(t=>t.parentId===e);return[e,...t.flatMap(e=>s(e.id))]},n=s(t);r(e.filter(e=>!n.includes(e.folderId))),o(a.filter(e=>!n.includes(e.id)))},addNote:t=>{let a={id:Date.now().toString(),title:"Untitled Note",content:"",folderId:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r([...e,a]),a},updateNote:t=>{r(e.map(e=>e.id===t.id?t:e))},deleteNote:t=>{r(e.filter(e=>e.id!==t))},syncWithGitHub:l}}(),[h,g]=(0,n.useState)(!1),N=e?a.find(t=>t.id===e):null;return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)("header",{className:"border-b",children:(0,s.jsxs)("div",{className:"container flex items-center justify-between h-16",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Markdown Notes"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(K,{onSync:x})})]})}),(0,s.jsx)("main",{className:"container py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-[300px_1fr] gap-4",children:[(0,s.jsx)("div",{className:"border rounded-lg",children:(0,s.jsx)(D,{folders:r,notes:a,selectedNoteId:e,onNoteSelect:t,onFolderCreate:o,onFolderDelete:l,onNoteCreate:e=>{t(i(e).id)},onNoteDelete:c})}),(0,s.jsx)("div",{className:"border rounded-lg p-4",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"font-semibold",children:N.title||"Untitled Note"}),(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>g(!h),children:h?"Edit":"Preview"})]}),(0,s.jsx)(b,{note:N,isPreview:h,onChange:d})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-[500px] text-muted-foreground",children:"Select a note or create a new one in a folder"})})]})})]})}B.displayName=Y.b.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[595,441,517,358],()=>t(909)),_N_E=e.O()}]);